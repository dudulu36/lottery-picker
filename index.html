<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>幸运选号助手888</title>
    <style>
        /* 页面基础样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            padding: 10px;
            max-width: 600px;
            margin: 0 auto;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* 标题样式 */
        .title {
            text-align: center;
            color: #e74c3c;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            padding: 10px;
            background-color: white;
            border-radius: 10px;
        }

        /* 彩票类型选择区域 */
        .lottery-type {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
            background-color: white;
            padding: 10px;
            border-radius: 10px;
        }

        .lottery-type button {
            flex: 1;
            margin: 0 5px;
            padding: 10px;
            border: 2px solid #e74c3c;
            background-color: white;
            color: #e74c3c;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .lottery-type button.active {
            background-color: #e74c3c;
            color: white;
        }

        /* 选号区域 */
        .number-area {
            background-color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            flex: 1;
            overflow-y: auto;
        }

        .area-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .number-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 10px;
        }

        .number-grid .number {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: 2px solid #ddd;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .number-grid .number.selected {
            background-color: #e74c3c;
            color: white;
            border-color: #e74c3c;
        }

        .number-grid .number.dan {
            border: 3px solid #f1c40f;
            background-color: #fff9e6;
        }

        .number-grid .number.filtered {
            background-color: #ff9800;
            text-decoration: line-through;
            color: white;
        }

        /* 胆拖开关 */
        .switch-row {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .switch-area {
            display: flex;
            align-items: center;
            justify-content: center;
            flex: 1;
            background-color: white;
            padding: 10px;
            border-radius: 10px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
            margin-right: 10px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 26px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #e74c3c;
        }

        input:checked + .slider:before {
            transform: translateX(24px);
        }

        .switch-label {
            font-size: 16px;
            color: #333;
        }

        /* 按钮区域 */
        .button-area {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
        }

        .button-area button {
            flex: 1;
            margin: 0 5px;
            padding: 12px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .button-area .random-one {
            background-color: #3498db;
            color: white;
        }

        .button-area .random-five {
            background-color: #2ecc71;
            color: white;
        }

        .button-area .copy {
            background-color: #f39c12;
            color: white;
        }

        .button-area .add-friend {
            background-color: #9b59b6;
            color: white;
        }

        /* 结果显示区域 */
        .result-area {
            background-color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 0;
            min-height: 180px;
        }

        .result-area .result {
            font-size: 18px;
            color: #333;
            text-align: center;
            margin-bottom: 10px;
        }

        .result-area .result span {
            color: #e74c3c;
            font-weight: bold;
        }

        .result-area .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .result-area .result-card {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e74c3c;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .result-area .close-btn {
            display: none;
        }

        /* 手机端优化 */
        @media (max-width: 480px) {
            .result-area .result-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }

            .result-area .result-card {
                padding: 10px;
                font-size: 14px;
            }

            .result-area .result {
                font-size: 16px;
            }

            .number-grid .number {
                width: 36px;
                height: 36px;
                font-size: 16px;
            }

            .number-grid {
                gap: 6px;
            }
        }

        /* 二维码弹窗 */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            max-width: 80%;
        }

        .modal-content h3 {
            margin-bottom: 15px;
            color: #333;
        }

        .modal-content img {
            width: 200px;
            height: 200px;
            margin-bottom: 15px;
        }

        .modal-content p {
            color: #666;
            margin-bottom: 15px;
        }

        .modal-content button {
            padding: 10px 20px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- 标题 -->
    <div class="title">幸运选号助手888</div>

    <!-- 彩票类型选择 -->
    <div class="lottery-type">
        <button class="active" onclick="selectLotteryType('ssq')">双色球</button>
        <button onclick="selectLotteryType('dlt')">大乐透</button>
        <button onclick="selectLotteryType('3d')">3D</button>
        <button onclick="selectLotteryType('qxc')">七星彩</button>
        <button onclick="selectLotteryType('pl3')">排列3</button>
        <button onclick="selectLotteryType('pl5')">排列5</button>
        <button onclick="selectLotteryType('kl8')">快乐8</button>
    </div>

    <!-- 选号区域 -->
    <div class="number-area" id="numberArea">
        <!-- 动态生成选号区域 -->
    </div>

    <!-- 胆拖和过滤开关 -->
    <div class="switch-row">
        <div class="switch-area">
            <label class="switch">
                <input type="checkbox" id="胆拖开关" onchange="toggle胆拖()">
                <span class="slider"></span>
            </label>
            <span class="switch-label">胆拖模式</span>
        </div>
        <div class="switch-area">
            <label class="switch">
                <input type="checkbox" id="过滤开关" onchange="toggle过滤()">
                <span class="slider"></span>
            </label>
            <span class="switch-label">过滤模式</span>
        </div>
    </div>

    <!-- 按钮区域 -->
    <div class="button-area">
        <button class="random-one" onclick="randomOne()">机选一注</button>
        <button class="random-five" onclick="randomFive()">机选五注</button>
        <button class="copy" onclick="copyNumbers()">复制号码</button>
        <button class="add-friend" onclick="showQRCode()">加好友</button>
    </div>

    <!-- 结果显示区域 -->
    <div class="result-area">
        <div id="result">请选择号码或机选</div>
    </div>

    <!-- 二维码弹窗 -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <h3>扫码添加好友</h3>
            <img src="https://via.placeholder.com/200" alt="微信二维码">
            <p>长按识别二维码添加好友</p>
            <button onclick="closeModal()">关闭</button>
        </div>
    </div>

    <script>
        // 当前选择的彩票类型
        let currentLotteryType = 'ssq';

        // 选中的号码
        let selectedNumbers = [];

        // 胆拖模式
        let is胆拖Mode = false;

        // 胆码
        let danNumbers = [];

        // 过滤模式
        let is过滤Mode = false;

        // 过滤号码
        let filteredNumbers = [];

        // 彩票类型配置
        const lotteryConfig = {
            ssq: {
                name: '双色球',
                redCount: 6,
                redMax: 33,
                blueCount: 1,
                blueMax: 16,
                numberFormat: 'twoDigit'
            },
            dlt: {
                name: '大乐透',
                redCount: 5,
                redMax: 35,
                blueCount: 2,
                blueMax: 12,
                numberFormat: 'twoDigit'
            },
            '3d': {
                name: '3D',
                redCount: 3,
                redMax: 9,
                blueCount: 0,
                blueMax: 0,
                numberFormat: 'oneDigit'
            },
            qxc: {
                name: '七星彩',
                redCount: 6,
                redMax: 9,
                blueCount: 1,
                blueMax: 14,
                numberFormat: 'oneDigit'
            },
            pl3: {
                name: '排列3',
                redCount: 3,
                redMax: 9,
                blueCount: 0,
                blueMax: 0,
                numberFormat: 'oneDigit'
            },
            pl5: {
                name: '排列5',
                redCount: 5,
                redMax: 9,
                blueCount: 0,
                blueMax: 0,
                numberFormat: 'oneDigit'
            },
            kl8: {
                name: '快乐8',
                redCount: 10,
                redMax: 80,
                blueCount: 0,
                blueMax: 0,
                numberFormat: 'twoDigit'
            }
        };

        // 切换胆拖模式
        function toggle胆拖() {
            is胆拖Mode = document.getElementById('胆拖开关').checked;
            
            if (is胆拖Mode) {
                // 打开胆拖模式，关闭过滤模式
                is过滤Mode = false;
                document.getElementById('过滤开关').checked = false;
                // 不清空过滤号码，保留状态
            } else {
                // 关闭胆拖模式，清空胆码
                danNumbers = [];
            }
            
            // 重新生成选号区域
            generateNumberArea();
            updateResult();
        }

        // 切换过滤模式
        function toggle过滤() {
            is过滤Mode = document.getElementById('过滤开关').checked;
            
            if (is过滤Mode) {
                // 打开过滤模式，关闭胆拖模式
                is胆拖Mode = false;
                document.getElementById('胆拖开关').checked = false;
                // 不清空胆码，保留状态
            } else {
                // 关闭过滤模式，清空过滤号码
                filteredNumbers = [];
            }
            
            // 重新生成选号区域
            generateNumberArea();
            updateResult();
        }

        // 选择彩票类型
        function selectLotteryType(type) {
            currentLotteryType = type;
            selectedNumbers = [];
            danNumbers = [];
            filteredNumbers = [];

            // 更新按钮样式
            const buttons = document.querySelectorAll('.lottery-type button');
            buttons.forEach(button => {
                button.classList.remove('active');
            });
            event.target.classList.add('active');

            // 重新生成选号区域
            generateNumberArea();
            updateResult();
        }

        // 生成选号区域
        function generateNumberArea() {
            const config = lotteryConfig[currentLotteryType];
            const numberArea = document.getElementById('numberArea');
            let html = '';

            // 红球区域
            if (config.redCount > 0) {
                html += '<div class="area-title">红球（选' + config.redCount + '个）</div>';
                html += '<div class="number-grid">';
                const redStart = config.numberFormat === 'oneDigit' ? 0 : 1;
                for (let i = redStart; i <= config.redMax; i++) {
                    const num = config.numberFormat === 'oneDigit' ? i : (i < 10 ? '0' + i : i);
                    const isDan = danNumbers.some(n => n.number === i && n.type === 'red');
                    const isFiltered = filteredNumbers.some(n => n.number === i && n.type === 'red');
                    const danClass = isDan ? ' dan' : '';
                    const filteredClass = isFiltered ? ' filtered' : '';
                    html += '<div class="number' + danClass + filteredClass + '" onclick="toggleNumber(this, ' + i + ', \'red\')">' + num + '</div>';
                }
                html += '</div>';
            }

            // 蓝球区域
            if (config.blueCount > 0) {
                html += '<div class="area-title">蓝球（选' + config.blueCount + '个）</div>';
                html += '<div class="number-grid">';
                const blueStart = config.numberFormat === 'oneDigit' ? 0 : 1;
                for (let i = blueStart; i <= config.blueMax; i++) {
                    const num = config.numberFormat === 'oneDigit' ? i : (i < 10 ? '0' + i : i);
                    const isDan = danNumbers.some(n => n.number === i && n.type === 'blue');
                    const isFiltered = filteredNumbers.some(n => n.number === i && n.type === 'blue');
                    const danClass = isDan ? ' dan' : '';
                    const filteredClass = isFiltered ? ' filtered' : '';
                    html += '<div class="number' + danClass + filteredClass + '" onclick="toggleNumber(this, ' + i + ', \'blue\')">' + num + '</div>';
                }
                html += '</div>';
            }

            numberArea.innerHTML = html;
        }

        // 切换号码选中状态
        function toggleNumber(element, number, type) {
            const config = lotteryConfig[currentLotteryType];

            if (is胆拖Mode) {
                // 胆拖模式
                const danIndex = danNumbers.findIndex(n => n.number === number && n.type === type);
                const filterIndex = filteredNumbers.findIndex(n => n.number === number && n.type === type);

                if (danIndex > -1) {
                    // 取消胆码
                    danNumbers.splice(danIndex, 1);
                    element.classList.remove('dan');
                } else if (filterIndex > -1) {
                    // 从过滤号码转为胆码
                    filteredNumbers.splice(filterIndex, 1);
                    element.classList.remove('filtered');
                    danNumbers.push({ number, type });
                    element.classList.add('dan');
                } else {
                    // 检查胆码数量是否超过限制
                    const danCount = danNumbers.filter(n => n.type === type).length;
                    const maxCount = type === 'red' ? config.redCount : config.blueCount;

                    if (danCount >= maxCount - 1) {
                        alert(type === 'red' ? '胆码最多选' + (maxCount - 1) + '个' : '胆码最多选' + (maxCount - 1) + '个');
                        return;
                    }

                    // 设为胆码
                    danNumbers.push({ number, type });
                    element.classList.add('dan');
                }
            } else if (is过滤Mode) {
                // 过滤模式
                const filterIndex = filteredNumbers.findIndex(n => n.number === number && n.type === type);
                const danIndex = danNumbers.findIndex(n => n.number === number && n.type === type);

                if (filterIndex > -1) {
                    // 取消过滤
                    filteredNumbers.splice(filterIndex, 1);
                    element.classList.remove('filtered');
                } else if (danIndex > -1) {
                    // 从胆码转为过滤号码
                    danNumbers.splice(danIndex, 1);
                    element.classList.remove('dan');
                    filteredNumbers.push({ number, type });
                    element.classList.add('filtered');
                } else {
                    // 设为过滤号码
                    filteredNumbers.push({ number, type });
                    element.classList.add('filtered');
                }
            } else {
                // 普通模式
                const index = selectedNumbers.findIndex(n => n.number === number && n.type === type);

                if (index > -1) {
                    // 取消选中
                    selectedNumbers.splice(index, 1);
                    element.classList.remove('selected');
                } else {
                    // 检查是否超过限制
                    const count = selectedNumbers.filter(n => n.type === type).length;
                    const maxCount = type === 'red' ? config.redCount : config.blueCount;

                    if (count >= maxCount) {
                        alert(type === 'red' ? '红球最多选' + maxCount + '个' : '蓝球最多选' + maxCount + '个');
                        return;
                    }

                    // 选中号码
                    selectedNumbers.push({ number, type });
                    element.classList.add('selected');
                }
            }

            updateResult();
        }

        // 更新结果显示
        function updateResult() {
            const config = lotteryConfig[currentLotteryType];
            const resultDiv = document.getElementById('result');

            if (selectedNumbers.length === 0) {
                resultDiv.innerHTML = '请选择号码或机选';
                return;
            }

            const redNumbers = selectedNumbers
                .filter(n => n.type === 'red')
                .map(n => config.numberFormat === 'oneDigit' ? n.number : (n.number < 10 ? '0' + n.number : n.number))
                .sort((a, b) => a - b);

            const blueNumbers = selectedNumbers
                .filter(n => n.type === 'blue')
                .map(n => config.numberFormat === 'oneDigit' ? n.number : (n.number < 10 ? '0' + n.number : n.number))
                .sort((a, b) => a - b);

            let result = '';
            if (redNumbers.length > 0) {
                result += redNumbers.join(' ');
            }
            if (blueNumbers.length > 0) {
                result += ' + ' + blueNumbers.join(' ');
            }

            resultDiv.innerHTML = '<div class="result-card"><span>' + result + '</span></div>';
        }

        // 机选一注
        function randomOne() {
            const config = lotteryConfig[currentLotteryType];
            selectedNumbers = [];

            // 获取胆码和过滤号码
            const redDanNumbers = danNumbers.filter(n => n.type === 'red').map(n => n.number);
            const blueDanNumbers = danNumbers.filter(n => n.type === 'blue').map(n => n.number);
            const redFilteredNumbers = filteredNumbers.filter(n => n.type === 'red').map(n => n.number);
            const blueFilteredNumbers = filteredNumbers.filter(n => n.type === 'blue').map(n => n.number);

            // 红球
            if (config.redCount > 0) {
                // 检查胆码数量是否超过限制
                if (redDanNumbers.length >= config.redCount) {
                    alert('红球胆码数量不能超过' + (config.redCount - 1) + '个');
                    return;
                }

                // 检查可选号码是否足够
                const redStart = config.numberFormat === 'oneDigit' ? 0 : 1;
                const totalRedNumbers = config.redMax - redStart + 1;
                const availableRedNumbers = totalRedNumbers - redDanNumbers.length - redFilteredNumbers.length;
                if (availableRedNumbers < config.redCount - redDanNumbers.length) {
                    alert('红球可选号码不足，请减少胆码或过滤号码');
                    return;
                }

                const redNumbers = [...redDanNumbers];
                let attempts = 0;
                const maxAttempts = 1000;
                
                while (redNumbers.length < config.redCount && attempts < maxAttempts) {
                    const num = Math.floor(Math.random() * (config.redMax - redStart + 1)) + redStart;
                    if (!redNumbers.includes(num) && !redFilteredNumbers.includes(num)) {
                        redNumbers.push(num);
                    }
                    attempts++;
                }

                if (redNumbers.length < config.redCount) {
                    alert('红球选号失败，请减少胆码或过滤号码');
                    return;
                }
                
                redNumbers.forEach(num => {
                    selectedNumbers.push({ number: num, type: 'red' });
                });
            }

            // 蓝球
            if (config.blueCount > 0) {
                // 检查胆码数量是否超过限制
                if (blueDanNumbers.length >= config.blueCount) {
                    alert('蓝球胆码数量不能超过' + (config.blueCount - 1) + '个');
                    return;
                }

                // 检查可选号码是否足够
                const blueStart = config.numberFormat === 'oneDigit' ? 0 : 1;
                const totalBlueNumbers = config.blueMax - blueStart + 1;
                const availableBlueNumbers = totalBlueNumbers - blueDanNumbers.length - blueFilteredNumbers.length;
                if (availableBlueNumbers < config.blueCount - blueDanNumbers.length) {
                    alert('蓝球可选号码不足，请减少胆码或过滤号码');
                    return;
                }

                const blueNumbers = [...blueDanNumbers];
                let attempts = 0;
                const maxAttempts = 1000;
                
                while (blueNumbers.length < config.blueCount && attempts < maxAttempts) {
                    const num = Math.floor(Math.random() * (config.blueMax - blueStart + 1)) + blueStart;
                    if (!blueNumbers.includes(num) && !blueFilteredNumbers.includes(num)) {
                        blueNumbers.push(num);
                    }
                    attempts++;
                }

                if (blueNumbers.length < config.blueCount) {
                    alert('蓝球选号失败，请减少胆码或过滤号码');
                    return;
                }
                
                blueNumbers.forEach(num => {
                    selectedNumbers.push({ number: num, type: 'blue' });
                });
            }

            // 更新界面
            generateNumberArea();
            updateResult();
        }

        // 机选五注
        function randomFive() {
            let results = [];
            for (let i = 0; i < 5; i++) {
                randomOne();
                const config = lotteryConfig[currentLotteryType];
                const redNumbers = selectedNumbers
                    .filter(n => n.type === 'red')
                    .map(n => config.numberFormat === 'oneDigit' ? n.number : (n.number < 10 ? '0' + n.number : n.number))
                    .sort((a, b) => a - b);

                const blueNumbers = selectedNumbers
                    .filter(n => n.type === 'blue')
                    .map(n => config.numberFormat === 'oneDigit' ? n.number : (n.number < 10 ? '0' + n.number : n.number))
                    .sort((a, b) => a - b);

                let result = '';
                if (redNumbers.length > 0) {
                    result += redNumbers.join(' ');
                }
                if (blueNumbers.length > 0) {
                    result += ' + ' + blueNumbers.join(' ');
                }
                results.push(result);
            }

            // 清空选中号码
            selectedNumbers = [];
            generateNumberArea();

            // 显示五注结果
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<div class="result-grid">' + results.map((r, i) => '<div class="result-card">第' + (i + 1) + '注：<span>' + r + '</span></div>').join('') + '</div>';
        }

        // 复制号码
        function copyNumbers() {
            const resultDiv = document.getElementById('result');

            // 检查是否有结果显示
            if (resultDiv.innerHTML.includes('请选择号码或机选')) {
                alert('请先选择号码或机选');
                return;
            }

            // 提取结果显示中的号码
            const spans = resultDiv.querySelectorAll('span');
            let results = [];

            spans.forEach(span => {
                results.push(span.textContent);
            });

            // 复制到剪贴板
            const textToCopy = results.join('\n');
            navigator.clipboard.writeText(textToCopy).then(() => {
                alert('复制成功！');
            }).catch(() => {
                alert('复制失败，请手动复制');
            });
        }

        // 显示二维码
        function showQRCode() {
            document.getElementById('modal').classList.add('show');
        }

        // 关闭弹窗
        function closeModal() {
            document.getElementById('modal').classList.remove('show');
        }

        // 初始化
        generateNumberArea();
    </script>
</body>
</html>
